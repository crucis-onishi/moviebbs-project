<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css' >
    <style>body {padding-top: 80px;}</style>
    <title>ゆっくり村</title>
</head>
<body>
    <nav class='navbar navbar-expand-sm navbar-dark bg-dark fixed-top'>
        <a class='navbar-brand' href='{% url "moviebbs:index" %}'>MovieBBS</a>
        <ul class='navbar-nav'>
            {% if user.is_authenticated %}
                <li class='nav-time'>
                    <span class='navbar-text'>{{ user }} - </span>
                </li>
                <li class='nav-item'>
                    <a href='{% url "account_logout" %}' class='logout nav-link'>Logout</a>
                </li>
            {% else %}
                <a href='{% url "account_login" %}' class='login nav-link'>Login</a>
            {% endif %}
        </ul>
    </nav>
    <header>
        <div class = 'header-area'>
            <h1>「{{ word }}」の検索結果</h1>
        </div>
    </header>
    <form action='' method = 'get' onsubmit='doSomething();return false;'>
        {% csrf_token %}
        <input type="text" class = 'form_control' name="word" placeholder = 'キーワードを入力' value='{{ word }}'>
        <input type='submit'class = 'btn btn-primary' value="Youtubeを検索">
    </form>

    <div class = "main-container">

        <table class="table">
            <thead>
            <tr>
                <th scope="col">タイトル</th>
                <th scope="col">チャンネル名</th>
                <th scope="col">再生回数</th>
                <th scope="col">サムネイル</th>
            </tr>
            </thead>
            {% for elem in data %}
            <tbody>
            <tr>
                <td class = 'elem'><a href = 'http://www.youtube.com/v/{{ elem.videoid }}' style = 'text-decoration: none'>
                    {{ elem.title | truncatechars:30 }}</a></td>
                <td class = 'elem'>{{ elem.channel }}</td>
                <td class = 'elem'>{{ elem.viewcount }}</td>
                <td><a href = 'http://www.youtube.com/v/{{ elem.videoid }}'>
                    <img src = "{{ elem.thumbnail }}"></a></td>
            </tr>
            </tbody>
            {% endfor %}
        </table>
    </div>
</body>
